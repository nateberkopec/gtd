#!/usr/bin/env fish
#
# gtd-reminders - Reminders.app CLI wrapper (remindctl) - Tickler File
#
# Commands:
#   list [LIST]           List reminders (default: all lists)
#   add TEXT              Create a reminder
#   add TEXT --due DATE   Create reminder with due date
#   complete ID           Mark reminder complete
#   delete ID             Delete a reminder
#   lists                 Show available reminder lists
#   due                   Show reminders due today
#   overdue               Show overdue reminders
#   help                  Show this help
#
# This is used as a "tickler file" - reminders that surface on specific dates.

set cmd $argv[1]
set rest $argv[2..-1]

switch "$cmd"
    case list l
        remindctl list $rest
    case add new
        remindctl add $rest
    case complete c done
        remindctl complete $rest
    case delete d remove
        remindctl delete $rest
    case lists
        remindctl list
    case due today
        remindctl show today
    case overdue
        remindctl show overdue
    case help -h --help ''
        echo "gtd-reminders - Reminders.app CLI wrapper (remindctl)"
        echo ""
        echo "This tool functions as a 'tickler file' - reminders that surface on specific dates."
        echo ""
        echo "Commands:"
        echo "  list [LIST]           List reminders (default: all lists)"
        echo "  add TEXT              Create a reminder"
        echo "  add TEXT --due DATE   Create reminder with due date"
        echo "  complete ID           Mark reminder complete"
        echo "  delete ID             Delete a reminder"
        echo "  lists                 Show available reminder lists"
        echo "  due                   Show reminders due today"
        echo "  overdue               Show overdue reminders"
        echo ""
        echo "Note: Requires Reminders access permission"
        echo "  System Settings > Privacy & Security > Reminders"
        exit 0
    case '*'
        echo "Unknown command: $cmd" >&2
        echo "Run 'gtd-reminders help' for usage" >&2
        exit 1
end
