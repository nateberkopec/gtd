#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path('../lib', __dir__)
require 'gtd/notes/cli'

# Add ~/.local/bin to PATH for notes command
ENV['PATH'] = "#{ENV['PATH']}:#{File.expand_path('~/.local/bin')}"

begin
  exit_code = GTD::Notes::CLI.new(ARGV).run
  exit(exit_code || 0)
rescue GTD::Notes::UnknownCommand => e
  warn "Unknown command: #{e.message}"
  warn "Run 'gtd-notes help' for usage"
  exit 1
rescue GTD::Notes::Error => e
  warn "Error: #{e.message}"
  exit 1
end
