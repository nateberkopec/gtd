#!/usr/bin/env ruby

require_relative '../lib/gtd/action/cli'

begin
  cli = GTD::Action::CLI.new(ARGV)
  exit_code = cli.run
  exit exit_code
rescue GTD::Action::UnknownCommand => e
  $stderr.puts "Unknown command: #{e.message}"
  $stderr.puts "Run 'gtd-action help' for usage"
  exit 1
rescue GTD::Action::ApiClient::ApiError => e
  $stderr.puts "API error: #{e.message}"
  exit 1
rescue ArgumentError => e
  $stderr.puts "Error: #{e.message}"
  exit 1
rescue GTD::Action::Error => e
  $stderr.puts "Error: #{e.message}"
  exit 1
rescue Interrupt
  $stderr.puts "\nInterrupted"
  exit 130
end
